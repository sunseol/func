# AI PM 기능 요구사항 문서

## 소개

FunCommute 시스템에 AI 기반 프로젝트 매니저(AI PM) 기능을 추가하여, 사용자가 플랫폼 기획 워크플로우를 AI와 협업하며 체계적으로 진행할 수 있도록 지원합니다. 이 기능은 AIPM.md에 정의된 9단계 워크플로우를 기반으로 하며, AI가 문서 작성을 담당하고 인간은 의사결정과 검토에 집중할 수 있도록 설계됩니다.

## 요구사항

### 요구사항 1: 프로젝트 관리 시스템

**사용자 스토리:** 관리자로서, 다양한 사업 프로젝트(전자책 플랫폼, 유학 플랫폼, 웹툰 플랫폼 등)를 생성하고 관련 기획자들을 협업에 참여시키고 싶습니다.

#### 승인 기준
1. WHEN 관리자가 새 프로젝트를 생성하면 THEN 시스템은 프로젝트명, 설명, 생성일을 포함한 프로젝트를 데이터베이스에 저장해야 합니다
2. WHEN 관리자가 프로젝트에 멤버를 추가하면 THEN 시스템은 해당 사용자를 프로젝트 멤버로 등록하고 역할을 할당해야 합니다
3. WHEN 사용자가 프로젝트 목록을 조회하면 THEN 시스템은 사용자가 멤버로 참여한 모든 프로젝트를 표시해야 합니다
4. WHEN 관리자가 프로젝트를 조회하면 THEN 시스템은 모든 프로젝트를 표시해야 합니다
5. WHEN 사용자가 특정 프로젝트를 선택하면 THEN 시스템은 해당 프로젝트의 9단계 워크플로우 현황과 멤버 목록을 표시해야 합니다

### 요구사항 2: AI 협업 인터페이스

**사용자 스토리:** 기획자로서, AI와 대화하면서 문서를 생성하되, 단순한 채팅이 아닌 업무용 인터페이스에서 작업하고 싶습니다.

#### 승인 기준
1. WHEN 사용자가 특정 워크플로우 단계에 진입하면 THEN 시스템은 문서 편집 영역과 AI 대화 영역을 동시에 표시해야 합니다
2. WHEN 사용자가 AI와 대화를 진행하면 THEN 시스템은 GROQ API를 통해 AIPM.md의 해당 단계 프롬프트를 사용하여 응답해야 합니다
3. WHEN 사용자가 "문서 생성" 버튼을 클릭하면 THEN 시스템은 대화 내용을 바탕으로 해당 단계의 기획 문서를 생성해야 합니다
4. WHEN 문서가 생성되면 THEN 사용자는 문서 내용을 직접 편집할 수 있어야 합니다

### 요구사항 3: 문서 상태 관리 및 승인 시스템

**사용자 스토리:** 기획자로서, 작업 중인 문서와 공식 승인된 문서를 구분하여 관리하고, 해당 담당자나 관리자의 승인을 받고 싶습니다.

#### 승인 기준
1. WHEN 사용자가 문서를 생성하거나 편집하면 THEN 시스템은 해당 문서를 "프라이빗" 상태로 저장해야 합니다
2. WHEN 문서가 프라이빗 상태일 때 THEN 해당 문서는 작성자만 열람할 수 있어야 합니다
3. WHEN 사용자가 문서 승인을 요청하면 THEN 시스템은 해당 단계의 담당자 또는 관리자에게 승인 요청을 전송해야 합니다
4. WHEN 담당자 또는 관리자가 문서를 승인하면 THEN 시스템은 문서를 "오피셜" 상태로 변경하고 프로젝트 멤버가 열람할 수 있도록 해야 합니다
5. WHEN 오피셜 문서가 수정되면 THEN 시스템은 버전 히스토리를 유지해야 합니다
6. WHEN 사용자가 다른 사용자의 문서를 수정하려 하면 THEN 시스템은 해당 담당자 또는 관리자의 승인을 요구해야 합니다

### 요구사항 4: AI 기반 충돌 감지 시스템

**사용자 스토리:** 기획자로서, 현재 작업 중인 문서가 기존 오피셜 문서들과 충돌하는지 AI의 피드백을 받고 싶습니다.

#### 승인 기준
1. WHEN 사용자가 "AI PM 피드백" 버튼을 클릭하면 THEN 시스템은 현재 문서와 모든 오피셜 문서를 AI에게 전달해야 합니다
2. WHEN AI가 충돌을 분석하면 THEN 시스템은 충돌 가능성, 완전한 충돌, 개선 제안을 포함한 피드백을 제공해야 합니다
3. WHEN 충돌이 감지되면 THEN 시스템은 구체적인 충돌 부분과 해결 방안을 제시해야 합니다
4. WHEN 충돌이 없으면 THEN 시스템은 "충돌 없음" 메시지와 함께 추가 개선 사항을 제안해야 합니다

### 요구사항 5: 9단계 워크플로우 지원

**사용자 스토리:** 기획자로서, AIPM.md에 정의된 9단계 워크플로우를 순차적으로 진행하되, 필요에 따라 이전 단계로 돌아가거나 다음 단계를 미리 작업할 수 있어야 합니다.

#### 승인 기준
1. WHEN 사용자가 특정 단계를 선택하면 THEN 시스템은 해당 단계의 프롬프트와 가이드라인을 표시해야 합니다
2. WHEN 사용자가 이전 단계로 이동하면 THEN 시스템은 기존 작업 내용을 유지하면서 해당 단계로 이동해야 합니다
3. WHEN 사용자가 다음 단계의 초안을 작성하려 하면 THEN 시스템은 현재까지의 오피셜 문서를 참조하여 초안 작성을 지원해야 합니다
4. WHEN 특정 단계의 오피셜 문서가 생성되면 THEN 시스템은 해당 단계를 완료로 표시해야 합니다

### 요구사항 6: 사용자 역할 및 권한 관리

**사용자 스토리:** 시스템 관리자로서, 기존 FunCommute의 사용자 권한 시스템을 활용하여 AI PM 기능의 접근을 제어하고, 프로젝트별 역할을 관리하고 싶습니다.

#### 승인 기준
1. WHEN 관리자가 프로젝트 멤버를 추가하면 THEN 시스템은 콘텐츠기획, 서비스기획, UIUX기획, 개발자 등의 역할 중 하나를 할당해야 합니다
2. WHEN 일반 사용자가 로그인하면 THEN 시스템은 해당 사용자가 멤버로 참여한 프로젝트만 표시해야 합니다
3. WHEN 관리자가 로그인하면 THEN 시스템은 모든 프로젝트와 문서에 접근할 수 있어야 합니다
4. WHEN 사용자가 권한이 없는 문서에 접근하려 하면 THEN 시스템은 접근을 거부해야 합니다
5. WHEN 프로젝트 멤버가 프로젝트를 조회하면 THEN 시스템은 다른 멤버들의 역할과 담당 업무를 표시해야 합니다
6. WHEN 사용자 세션이 만료되면 THEN 시스템은 자동으로 로그아웃 처리해야 합니다

### 요구사항 7: 데이터 저장 및 관리

**사용자 스토리:** 개발자로서, AI PM 기능의 모든 데이터를 기존 Supabase 인프라를 활용하여 안전하게 저장하고 관리하고 싶습니다.

#### 승인 기준
1. WHEN 프로젝트 데이터가 생성되면 THEN 시스템은 Supabase의 projects 테이블에 저장해야 합니다
2. WHEN 문서 데이터가 생성되면 THEN 시스템은 planning_documents 테이블에 저장해야 합니다
3. WHEN AI 대화 내역이 발생하면 THEN 시스템은 ai_conversations 테이블에 저장해야 합니다
4. WHEN 데이터베이스 작업이 실행되면 THEN 시스템은 RLS(Row Level Security) 정책을 적용해야 합니다
##
# 요구사항 8: 프로젝트 협업 관리

**사용자 스토리:** 프로젝트 멤버로서, 다른 팀원들과 협업하며 각자의 역할과 진행상황을 파악하고 싶습니다.

#### 승인 기준
1. WHEN 관리자가 프로젝트 멤버를 제거하면 THEN 시스템은 해당 사용자의 프로젝트 접근 권한을 즉시 제거해야 합니다
2. WHEN 프로젝트 멤버가 프로젝트에 접근하면 THEN 시스템은 모든 멤버의 이름, 역할, 담당 단계를 표시해야 합니다
3. WHEN 사용자가 문서를 작성하거나 수정하면 THEN 시스템은 해당 활동을 프로젝트 히스토리에 기록해야 합니다
4. WHEN 프로젝트 멤버가 다른 멤버의 작업을 조회하면 THEN 시스템은 오피셜 문서만 표시하고 프라이빗 문서는 숨겨야 합니다